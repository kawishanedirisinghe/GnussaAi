<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenManus AI - Advanced IDE</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/monokai.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/closetag.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/hint/show-hint.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/hint/show-hint.min.css">
    
    <style>
        :root {
            --primary: #007acc;
            --primary-dark: #005a9e;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
            --info: #3b82f6;
            --dark: #1e1e1e;
            --dark-light: #2d2d30;
            --dark-lighter: #3e3e42;
            --gray: #64748b;
            --gray-light: #94a3b8;
            --light: #f8fafc;
            --white: #ffffff;
            --border: #404040;
            --text: #cccccc;
            --text-muted: #969696;
            --activity-bar: #333333;
            --sidebar: #252526;
            --editor: #1e1e1e;
            --panel: #181818;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark);
            color: var(--text);
            height: 100vh;
            overflow: hidden;
        }

        /* Main Layout */
        .ide-container {
            display: flex;
            height: 100vh;
            background: var(--dark);
        }

        /* Activity Bar */
        .activity-bar {
            width: 50px;
            background: var(--activity-bar);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 0;
            border-right: 1px solid var(--border);
        }

        .activity-item {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 5px 0;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.2s;
            position: relative;
        }

        .activity-item:hover {
            background: var(--dark-light);
        }

        .activity-item.active {
            background: var(--primary);
        }

        .activity-item i {
            font-size: 18px;
            color: var(--text);
        }

        /* Sidebar */
        .sidebar {
            width: 300px;
            background: var(--sidebar);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sidebar-header {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 11px;
            color: var(--text-muted);
            letter-spacing: 1px;
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        /* File Explorer */
        .file-tree {
            list-style: none;
        }

        .file-item {
            display: flex;
            align-items: center;
            padding: 4px 8px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 13px;
            user-select: none;
        }

        .file-item:hover {
            background: var(--dark-light);
        }

        .file-item.selected {
            background: var(--primary);
        }

        .file-item i {
            margin-right: 8px;
            width: 16px;
            text-align: center;
        }

        .folder-icon {
            color: #dcb67a;
        }

        .file-icon {
            color: var(--text-muted);
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Tab Bar */
        .tab-bar {
            background: var(--dark-light);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            min-height: 35px;
            overflow-x: auto;
        }

        .tab {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background: var(--dark);
            border-right: 1px solid var(--border);
            cursor: pointer;
            font-size: 13px;
            white-space: nowrap;
            position: relative;
        }

        .tab.active {
            background: var(--editor);
            border-bottom: 2px solid var(--primary);
        }

        .tab-close {
            margin-left: 8px;
            padding: 2px;
            border-radius: 2px;
            opacity: 0.7;
        }

        .tab-close:hover {
            background: var(--danger);
            opacity: 1;
        }

        /* Editor Area */
        .editor-container {
            flex: 1;
            background: var(--editor);
            position: relative;
            overflow: hidden;
        }

        .CodeMirror {
            height: 100%;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Welcome Screen */
        .welcome-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            background: var(--editor);
            flex-direction: column;
            text-align: center;
        }

        .welcome-logo {
            font-size: 64px;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .welcome-title {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .welcome-subtitle {
            color: var(--text-muted);
            margin-bottom: 30px;
        }

        .welcome-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .welcome-action {
            background: var(--dark-light);
            border: 1px solid var(--border);
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
        }

        .welcome-action:hover {
            background: var(--dark-lighter);
            border-color: var(--primary);
        }

        .welcome-action i {
            font-size: 24px;
            margin-bottom: 8px;
            color: var(--primary);
        }

        /* Bottom Panel */
        .bottom-panel {
            height: 200px;
            background: var(--panel);
            border-top: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            resize: vertical;
            overflow: hidden;
        }

        .panel-tabs {
            background: var(--dark-light);
            display: flex;
            align-items: center;
            min-height: 35px;
            border-bottom: 1px solid var(--border);
        }

        .panel-tab {
            padding: 8px 16px;
            cursor: pointer;
            font-size: 13px;
            border-right: 1px solid var(--border);
        }

        .panel-tab.active {
            background: var(--panel);
            border-bottom: 2px solid var(--primary);
        }

        .panel-content {
            flex: 1;
            overflow: hidden;
        }

        /* Terminal */
        .terminal {
            background: var(--panel);
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            padding: 10px;
            height: 100%;
            overflow-y: auto;
        }

        .terminal-line {
            margin: 2px 0;
            word-wrap: break-word;
        }

        .terminal-input {
            background: transparent;
            border: none;
            color: var(--text);
            font-family: inherit;
            font-size: inherit;
            outline: none;
            width: 100%;
        }

        /* AI Chat Panel */
        .ai-chat {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: var(--panel);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .chat-message {
            margin: 10px 0;
            padding: 8px 12px;
            border-radius: 8px;
            max-width: 80%;
        }

        .chat-message.user {
            background: var(--primary);
            align-self: flex-end;
            margin-left: auto;
        }

        .chat-message.ai {
            background: var(--dark-light);
            border: 1px solid var(--border);
        }

        .chat-input-container {
            padding: 10px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            background: var(--dark-light);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            outline: none;
        }

        .chat-input:focus {
            border-color: var(--primary);
        }

        .chat-send {
            background: var(--primary);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        .chat-send:hover {
            background: var(--primary-dark);
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal {
            background: var(--dark-light);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text);
        }

        .modal-content {
            margin-bottom: 20px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--dark-lighter);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: var(--text);
        }

        .form-input {
            width: 100%;
            background: var(--dark);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            outline: none;
        }

        .form-input:focus {
            border-color: var(--primary);
        }

        .form-select {
            width: 100%;
            background: var(--dark);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            outline: none;
        }

        /* Context Menu */
        .context-menu {
            position: fixed;
            background: var(--dark-light);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 5px 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            min-width: 150px;
        }

        .context-menu-item {
            padding: 8px 16px;
            cursor: pointer;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-menu-item:hover {
            background: var(--primary);
        }

        .context-menu-separator {
            height: 1px;
            background: var(--border);
            margin: 5px 0;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--dark-light);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            z-index: 1000;
            max-width: 300px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .notification.success {
            border-color: var(--success);
        }

        .notification.error {
            border-color: var(--danger);
        }

        .notification.warning {
            border-color: var(--warning);
        }

        .notification.info {
            border-color: var(--info);
        }

        /* Scrollbars */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 250px;
            }
            
            .welcome-actions {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Hidden utility */
        .hidden {
            display: none !important;
        }

        /* Loading spinner */
        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="ide-container">
        <!-- Activity Bar -->
        <div class="activity-bar">
            <div class="activity-item active" data-panel="explorer" title="Explorer">
                <i class="fas fa-folder-tree"></i>
            </div>
            <div class="activity-item" data-panel="search" title="Search">
                <i class="fas fa-search"></i>
            </div>
            <div class="activity-item" data-panel="git" title="Source Control">
                <i class="fas fa-code-branch"></i>
            </div>
            <div class="activity-item" data-panel="ai" title="AI Assistant">
                <i class="fas fa-robot"></i>
            </div>
            <div class="activity-item" data-panel="templates" title="Project Templates">
                <i class="fas fa-layer-group"></i>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Explorer Panel -->
            <div class="sidebar-panel" id="explorer-panel">
                <div class="sidebar-header">
                    Explorer
                    <div style="float: right;">
                        <i class="fas fa-plus" title="New File" onclick="showNewFileModal()"></i>
                        <i class="fas fa-folder-plus" title="New Folder" onclick="showNewFolderModal()" style="margin-left: 8px;"></i>
                        <i class="fas fa-sync" title="Refresh" onclick="refreshFileTree()" style="margin-left: 8px;"></i>
                    </div>
                </div>
                <div class="sidebar-content">
                    <div id="file-tree"></div>
                </div>
            </div>

            <!-- Search Panel -->
            <div class="sidebar-panel hidden" id="search-panel">
                <div class="sidebar-header">Search</div>
                <div class="sidebar-content">
                    <div class="form-group">
                        <input type="text" class="form-input" id="search-pattern" placeholder="Search pattern">
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="search-case-sensitive"> Case sensitive
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="search-file-content"> Search in file content
                        </label>
                    </div>
                    <button class="btn btn-primary" onclick="performSearch()">Search</button>
                    <div id="search-results"></div>
                </div>
            </div>

            <!-- Git Panel -->
            <div class="sidebar-panel hidden" id="git-panel">
                <div class="sidebar-header">Source Control</div>
                <div class="sidebar-content">
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="showCloneModal()">Clone Repository</button>
                    </div>
                    <div id="git-repositories"></div>
                </div>
            </div>

            <!-- AI Panel -->
            <div class="sidebar-panel hidden" id="ai-panel">
                <div class="sidebar-header">AI Assistant</div>
                <div class="sidebar-content">
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="showAICodeModal()">Generate Code</button>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-secondary" onclick="showRefactorModal()">Refactor Code</button>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-secondary" onclick="showExplainModal()">Explain Code</button>
                    </div>
                </div>
            </div>

            <!-- Templates Panel -->
            <div class="sidebar-panel hidden" id="templates-panel">
                <div class="sidebar-header">Project Templates</div>
                <div class="sidebar-content">
                    <button class="btn btn-primary" onclick="showTemplateModal()">Create New Project</button>
                    <div id="template-list"></div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Tab Bar -->
            <div class="tab-bar" id="tab-bar">
                <!-- Tabs will be added dynamically -->
            </div>

            <!-- Editor Container -->
            <div class="editor-container">
                <!-- Welcome Screen -->
                <div class="welcome-screen" id="welcome-screen">
                    <div class="welcome-logo">
                        <i class="fas fa-code"></i>
                    </div>
                    <h1 class="welcome-title">OpenManus AI IDE</h1>
                    <p class="welcome-subtitle">Advanced VS Code-like development environment with AI assistance</p>
                    <div class="welcome-actions">
                        <div class="welcome-action" onclick="showTemplateModal()">
                            <i class="fas fa-plus"></i>
                            <span>New Project</span>
                        </div>
                        <div class="welcome-action" onclick="showCloneModal()">
                            <i class="fas fa-download"></i>
                            <span>Clone Repository</span>
                        </div>
                        <div class="welcome-action" onclick="document.getElementById('file-upload').click()">
                            <i class="fas fa-upload"></i>
                            <span>Upload Files</span>
                        </div>
                        <div class="welcome-action" onclick="showAICodeModal()">
                            <i class="fas fa-robot"></i>
                            <span>AI Generate</span>
                        </div>
                    </div>
                </div>

                <!-- Code Editor (hidden initially) -->
                <div id="code-editor" class="hidden">
                    <textarea id="editor-textarea"></textarea>
                </div>
            </div>

            <!-- Bottom Panel -->
            <div class="bottom-panel" id="bottom-panel">
                <div class="panel-tabs">
                    <div class="panel-tab active" data-panel="terminal">
                        <i class="fas fa-terminal"></i> Terminal
                    </div>
                    <div class="panel-tab" data-panel="ai-chat">
                        <i class="fas fa-comments"></i> AI Chat
                    </div>
                    <div class="panel-tab" data-panel="output">
                        <i class="fas fa-list"></i> Output
                    </div>
                </div>
                <div class="panel-content">
                    <!-- Terminal -->
                    <div class="terminal" id="terminal-panel">
                        <div id="terminal-output"></div>
                        <div style="display: flex; align-items: center; margin-top: 5px;">
                            <span style="color: var(--success); margin-right: 5px;">$</span>
                            <input type="text" class="terminal-input" id="terminal-input" placeholder="Enter command...">
                        </div>
                    </div>

                    <!-- AI Chat -->
                    <div class="ai-chat hidden" id="ai-chat-panel">
                        <div class="chat-messages" id="chat-messages">
                            <div class="chat-message ai">
                                <strong>AI Assistant:</strong> Hello! I'm here to help you with coding, debugging, and development tasks. How can I assist you today?
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chat-input" placeholder="Ask me anything about coding...">
                            <button class="chat-send" onclick="sendChatMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Output -->
                    <div class="terminal hidden" id="output-panel">
                        <div id="output-content">No output yet...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for uploads -->
    <input type="file" id="file-upload" multiple style="display: none;" onchange="handleFileUpload(event)">

    <!-- Modals will be added dynamically -->
    <div id="modal-container"></div>

    <script>
        // Global variables
        let currentEditor = null;
        let openTabs = new Map();
        let activeTab = null;
        let fileTree = null;
        let currentPanel = 'explorer';

        // Initialize the IDE
        document.addEventListener('DOMContentLoaded', function() {
            initializeIDE();
            loadFileTree();
            loadTemplates();
            loadGitRepositories();
            setupEventListeners();
        });

        function initializeIDE() {
            // Initialize CodeMirror
            const editorTextarea = document.getElementById('editor-textarea');
            currentEditor = CodeMirror.fromTextArea(editorTextarea, {
                theme: 'monokai',
                lineNumbers: true,
                mode: 'python',
                autoCloseBrackets: true,
                autoCloseTags: true,
                extraKeys: {
                    "Ctrl-Space": "autocomplete",
                    "Ctrl-S": function(cm) { saveCurrentFile(); },
                    "Ctrl-N": function(cm) { showNewFileModal(); },
                    "Ctrl-O": function(cm) { document.getElementById('file-upload').click(); }
                }
            });

            // Hide editor initially
            document.getElementById('code-editor').classList.add('hidden');
        }

        function setupEventListeners() {
            // Activity bar clicks
            document.querySelectorAll('.activity-item').forEach(item => {
                item.addEventListener('click', function() {
                    switchPanel(this.dataset.panel);
                });
            });

            // Panel tab clicks
            document.querySelectorAll('.panel-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    switchBottomPanel(this.dataset.panel);
                });
            });

            // Terminal input
            document.getElementById('terminal-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    executeTerminalCommand(this.value);
                    this.value = '';
                }
            });

            // Chat input
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });

            // Context menu
            document.addEventListener('contextmenu', function(e) {
                if (e.target.closest('.file-item')) {
                    e.preventDefault();
                    showContextMenu(e, e.target.closest('.file-item'));
                }
            });

            // Click outside to close context menu
            document.addEventListener('click', function() {
                closeContextMenu();
            });
        }

        function switchPanel(panelName) {
            // Update activity bar
            document.querySelectorAll('.activity-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-panel="${panelName}"]`).classList.add('active');

            // Update sidebar panels
            document.querySelectorAll('.sidebar-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            document.getElementById(`${panelName}-panel`).classList.remove('hidden');

            currentPanel = panelName;
        }

        function switchBottomPanel(panelName) {
            // Update panel tabs
            document.querySelectorAll('.panel-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-panel="${panelName}"]`).classList.add('active');

            // Update panel content
            document.querySelectorAll('#terminal-panel, #ai-chat-panel, #output-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            if (panelName === 'terminal') {
                document.getElementById('terminal-panel').classList.remove('hidden');
            } else if (panelName === 'ai-chat') {
                document.getElementById('ai-chat-panel').classList.remove('hidden');
            } else if (panelName === 'output') {
                document.getElementById('output-panel').classList.remove('hidden');
            }
        }

        // File Tree Functions
        async function loadFileTree() {
            try {
                const response = await fetch('/api/files/tree');
                const data = await response.json();
                
                if (data.success) {
                    renderFileTree(data.tree);
                } else {
                    showNotification('Error loading file tree: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error loading file tree: ' + error.message, 'error');
            }
        }

        function renderFileTree(tree) {
            const container = document.getElementById('file-tree');
            container.innerHTML = '';
            
            if (tree.children) {
                const ul = document.createElement('ul');
                ul.className = 'file-tree';
                tree.children.forEach(item => {
                    ul.appendChild(createFileTreeItem(item));
                });
                container.appendChild(ul);
            }
        }

        function createFileTreeItem(item) {
            const li = document.createElement('li');
            const div = document.createElement('div');
            div.className = 'file-item';
            div.dataset.path = item.path;
            div.dataset.type = item.type;
            
            const icon = document.createElement('i');
            if (item.type === 'directory') {
                icon.className = 'fas fa-folder folder-icon';
            } else {
                icon.className = getFileIcon(item.name);
            }
            
            const name = document.createElement('span');
            name.textContent = item.name;
            
            div.appendChild(icon);
            div.appendChild(name);
            
            div.addEventListener('click', function() {
                if (item.type === 'file') {
                    openFile(item.path, item.name);
                } else {
                    toggleFolder(this);
                }
            });
            
            li.appendChild(div);
            
            if (item.type === 'directory' && item.children) {
                const ul = document.createElement('ul');
                ul.className = 'file-tree';
                ul.style.display = 'none';
                item.children.forEach(child => {
                    ul.appendChild(createFileTreeItem(child));
                });
                li.appendChild(ul);
            }
            
            return li;
        }

        function getFileIcon(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            const iconMap = {
                'py': 'fab fa-python',
                'js': 'fab fa-js-square',
                'ts': 'fab fa-js-square',
                'html': 'fab fa-html5',
                'css': 'fab fa-css3-alt',
                'json': 'fas fa-code',
                'md': 'fab fa-markdown',
                'txt': 'fas fa-file-alt',
                'png': 'fas fa-image',
                'jpg': 'fas fa-image',
                'jpeg': 'fas fa-image',
                'gif': 'fas fa-image',
                'svg': 'fas fa-image',
                'pdf': 'fas fa-file-pdf',
                'zip': 'fas fa-file-archive',
                'tar': 'fas fa-file-archive',
                'gz': 'fas fa-file-archive'
            };
            
            return iconMap[ext] || 'fas fa-file file-icon';
        }

        function toggleFolder(folderElement) {
            const ul = folderElement.parentElement.querySelector('ul');
            if (ul) {
                const isHidden = ul.style.display === 'none';
                ul.style.display = isHidden ? 'block' : 'none';
                
                const icon = folderElement.querySelector('i');
                icon.className = isHidden ? 'fas fa-folder-open folder-icon' : 'fas fa-folder folder-icon';
            }
        }

        // File Operations
        async function openFile(filePath, fileName) {
            try {
                const response = await fetch(`/api/files/read?path=${encodeURIComponent(filePath)}`);
                const data = await response.json();
                
                if (data.success) {
                    createTab(fileName, filePath, data.content);
                    showEditor();
                } else {
                    showNotification('Error opening file: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error opening file: ' + error.message, 'error');
            }
        }

        function createTab(fileName, filePath, content) {
            const tabBar = document.getElementById('tab-bar');
            
            // Check if tab already exists
            if (openTabs.has(filePath)) {
                switchToTab(filePath);
                return;
            }
            
            // Create new tab
            const tab = document.createElement('div');
            tab.className = 'tab';
            tab.dataset.path = filePath;
            
            const name = document.createElement('span');
            name.textContent = fileName;
            
            const close = document.createElement('i');
            close.className = 'fas fa-times tab-close';
            close.addEventListener('click', function(e) {
                e.stopPropagation();
                closeTab(filePath);
            });
            
            tab.appendChild(name);
            tab.appendChild(close);
            
            tab.addEventListener('click', function() {
                switchToTab(filePath);
            });
            
            tabBar.appendChild(tab);
            
            // Store tab data
            openTabs.set(filePath, {
                element: tab,
                content: content,
                fileName: fileName,
                modified: false
            });
            
            switchToTab(filePath);
        }

        function switchToTab(filePath) {
            // Update tab appearance
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            const tabData = openTabs.get(filePath);
            if (tabData) {
                tabData.element.classList.add('active');
                currentEditor.setValue(tabData.content);
                activeTab = filePath;
                
                // Set editor mode based on file extension
                const ext = filePath.split('.').pop().toLowerCase();
                const modeMap = {
                    'py': 'python',
                    'js': 'javascript',
                    'ts': 'javascript',
                    'html': 'xml',
                    'css': 'css',
                    'json': 'javascript',
                    'md': 'markdown'
                };
                
                if (modeMap[ext]) {
                    currentEditor.setOption('mode', modeMap[ext]);
                }
            }
        }

        function closeTab(filePath) {
            const tabData = openTabs.get(filePath);
            if (tabData) {
                // Check if file is modified
                if (tabData.modified) {
                    if (!confirm('File has unsaved changes. Close anyway?')) {
                        return;
                    }
                }
                
                // Remove tab element
                tabData.element.remove();
                openTabs.delete(filePath);
                
                // Switch to another tab or show welcome screen
                if (openTabs.size > 0) {
                    const firstTab = openTabs.keys().next().value;
                    switchToTab(firstTab);
                } else {
                    showWelcomeScreen();
                }
            }
        }

        function showEditor() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('code-editor').classList.remove('hidden');
            currentEditor.refresh();
        }

        function showWelcomeScreen() {
            document.getElementById('code-editor').classList.add('hidden');
            document.getElementById('welcome-screen').classList.remove('hidden');
            activeTab = null;
        }

        // Save current file
        async function saveCurrentFile() {
            if (!activeTab) return;
            
            const content = currentEditor.getValue();
            
            try {
                const response = await fetch('/api/files/write', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        path: activeTab,
                        content: content
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Update tab data
                    const tabData = openTabs.get(activeTab);
                    if (tabData) {
                        tabData.content = content;
                        tabData.modified = false;
                    }
                    
                    showNotification('File saved successfully', 'success');
                } else {
                    showNotification('Error saving file: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error saving file: ' + error.message, 'error');
            }
        }

        // Modal Functions
        function showModal(title, content, actions) {
            const container = document.getElementById('modal-container');
            
            const overlay = document.createElement('div');
            overlay.className = 'modal-overlay';
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            
            const header = document.createElement('div');
            header.className = 'modal-header';
            header.textContent = title;
            
            const modalContent = document.createElement('div');
            modalContent.className = 'modal-content';
            modalContent.innerHTML = content;
            
            const modalActions = document.createElement('div');
            modalActions.className = 'modal-actions';
            modalActions.innerHTML = actions;
            
            modal.appendChild(header);
            modal.appendChild(modalContent);
            modal.appendChild(modalActions);
            overlay.appendChild(modal);
            container.appendChild(overlay);
            
            // Close on overlay click
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    closeModal();
                }
            });
            
            return overlay;
        }

        function closeModal() {
            const container = document.getElementById('modal-container');
            container.innerHTML = '';
        }

        function showNewFileModal() {
            const content = `
                <div class="form-group">
                    <label class="form-label">File Name:</label>
                    <input type="text" class="form-input" id="new-file-name" placeholder="example.py">
                </div>
            `;
            
            const actions = `
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="createNewFile()">Create</button>
            `;
            
            showModal('New File', content, actions);
            
            setTimeout(() => {
                document.getElementById('new-file-name').focus();
            }, 100);
        }

        async function createNewFile() {
            const fileName = document.getElementById('new-file-name').value.trim();
            
            if (!fileName) {
                showNotification('Please enter a file name', 'warning');
                return;
            }
            
            try {
                const response = await fetch('/api/files/write', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        path: fileName,
                        content: ''
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    closeModal();
                    createTab(fileName, data.path, '');
                    showEditor();
                    refreshFileTree();
                    showNotification('File created successfully', 'success');
                } else {
                    showNotification('Error creating file: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error creating file: ' + error.message, 'error');
            }
        }

        function showNewFolderModal() {
            const content = `
                <div class="form-group">
                    <label class="form-label">Folder Name:</label>
                    <input type="text" class="form-input" id="new-folder-name" placeholder="my-folder">
                </div>
            `;
            
            const actions = `
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="createNewFolder()">Create</button>
            `;
            
            showModal('New Folder', content, actions);
            
            setTimeout(() => {
                document.getElementById('new-folder-name').focus();
            }, 100);
        }

        async function createNewFolder() {
            const folderName = document.getElementById('new-folder-name').value.trim();
            
            if (!folderName) {
                showNotification('Please enter a folder name', 'warning');
                return;
            }
            
            try {
                const response = await fetch('/api/files/create-directory', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        path: folderName
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    closeModal();
                    refreshFileTree();
                    showNotification('Folder created successfully', 'success');
                } else {
                    showNotification('Error creating folder: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error creating folder: ' + error.message, 'error');
            }
        }

        // Git Functions
        function showCloneModal() {
            const content = `
                <div class="form-group">
                    <label class="form-label">Repository URL:</label>
                    <input type="text" class="form-input" id="repo-url" placeholder="https://github.com/user/repo.git">
                </div>
                <div class="form-group">
                    <label class="form-label">Directory Name (optional):</label>
                    <input type="text" class="form-input" id="target-dir" placeholder="Leave empty for auto-generated">
                </div>
                <div class="form-group">
                    <label class="form-label">Branch (optional):</label>
                    <input type="text" class="form-input" id="branch" placeholder="main">
                </div>
            `;
            
            const actions = `
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="cloneRepository()">Clone</button>
            `;
            
            showModal('Clone Repository', content, actions);
        }

        async function cloneRepository() {
            const repoUrl = document.getElementById('repo-url').value.trim();
            const targetDir = document.getElementById('target-dir').value.trim();
            const branch = document.getElementById('branch').value.trim();
            
            if (!repoUrl) {
                showNotification('Please enter a repository URL', 'warning');
                return;
            }
            
            try {
                const response = await fetch('/api/git/clone', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        repo_url: repoUrl,
                        target_dir: targetDir || null,
                        branch: branch || null
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    closeModal();
                    refreshFileTree();
                    loadGitRepositories();
                    showNotification('Repository cloned successfully', 'success');
                } else {
                    showNotification('Error cloning repository: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error cloning repository: ' + error.message, 'error');
            }
        }

        async function loadGitRepositories() {
            try {
                const response = await fetch('/api/git/repositories');
                const data = await response.json();
                
                if (data.success) {
                    renderGitRepositories(data.repositories);
                }
            } catch (error) {
                console.error('Error loading Git repositories:', error);
            }
        }

        function renderGitRepositories(repositories) {
            const container = document.getElementById('git-repositories');
            container.innerHTML = '';
            
            repositories.forEach(repo => {
                const div = document.createElement('div');
                div.style.cssText = 'margin: 10px 0; padding: 10px; background: var(--dark-light); border-radius: 6px;';
                
                div.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 5px;">${repo.name}</div>
                    <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 5px;">
                        Branch: ${repo.current_branch || 'unknown'}
                    </div>
                    <div style="display: flex; gap: 5px;">
                        <button class="btn btn-primary" style="font-size: 11px; padding: 4px 8px;" onclick="gitPull('${repo.path}')">Pull</button>
                        <button class="btn btn-secondary" style="font-size: 11px; padding: 4px 8px;" onclick="gitPush('${repo.path}')">Push</button>
                        <button class="btn btn-secondary" style="font-size: 11px; padding: 4px 8px;" onclick="showCommitModal('${repo.path}')">Commit</button>
                    </div>
                `;
                
                container.appendChild(div);
            });
        }

        // AI Functions
        function showAICodeModal() {
            const content = `
                <div class="form-group">
                    <label class="form-label">Language:</label>
                    <select class="form-select" id="ai-language">
                        <option value="python">Python</option>
                        <option value="javascript">JavaScript</option>
                        <option value="typescript">TypeScript</option>
                        <option value="java">Java</option>
                        <option value="cpp">C++</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Description:</label>
                    <textarea class="form-input" id="ai-prompt" rows="4" placeholder="Describe what you want to generate..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Context (optional):</label>
                    <textarea class="form-input" id="ai-context" rows="3" placeholder="Existing code or context..."></textarea>
                </div>
            `;
            
            const actions = `
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="generateAICode()">Generate</button>
            `;
            
            showModal('Generate Code with AI', content, actions);
        }

        async function generateAICode() {
            const language = document.getElementById('ai-language').value;
            const prompt = document.getElementById('ai-prompt').value.trim();
            const context = document.getElementById('ai-context').value.trim();
            
            if (!prompt) {
                showNotification('Please enter a description', 'warning');
                return;
            }
            
            try {
                const response = await fetch('/api/ai/generate-code', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        prompt: prompt,
                        language: language,
                        context: context || null
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    closeModal();
                    const fileName = `generated.${getFileExtension(language)}`;
                    createTab(fileName, fileName, data.code);
                    showEditor();
                    showNotification('Code generated successfully', 'success');
                } else {
                    showNotification('Error generating code: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error generating code: ' + error.message, 'error');
            }
        }

        function getFileExtension(language) {
            const extMap = {
                'python': 'py',
                'javascript': 'js',
                'typescript': 'ts',
                'java': 'java',
                'cpp': 'cpp'
            };
            return extMap[language] || 'txt';
        }

        // Template Functions
        async function loadTemplates() {
            try {
                const response = await fetch('/api/templates/list');
                const data = await response.json();
                
                if (data.success) {
                    renderTemplates(data.templates);
                }
            } catch (error) {
                console.error('Error loading templates:', error);
            }
        }

        function renderTemplates(templates) {
            const container = document.getElementById('template-list');
            container.innerHTML = '';
            
            templates.forEach(template => {
                const div = document.createElement('div');
                div.style.cssText = 'margin: 10px 0; padding: 10px; background: var(--dark-light); border-radius: 6px; cursor: pointer;';
                
                div.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 5px;">${template.name}</div>
                    <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 5px;">
                        ${template.language} • ${template.framework}
                    </div>
                    <div style="font-size: 12px; color: var(--text-muted);">
                        ${template.description}
                    </div>
                `;
                
                div.addEventListener('click', function() {
                    showCreateProjectModal(template.id, template.name);
                });
                
                container.appendChild(div);
            });
        }

        function showTemplateModal() {
            switchPanel('templates');
        }

        function showCreateProjectModal(templateId, templateName) {
            const content = `
                <div class="form-group">
                    <label class="form-label">Template:</label>
                    <div style="padding: 8px; background: var(--dark); border-radius: 4px; color: var(--text-muted);">
                        ${templateName}
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Project Name:</label>
                    <input type="text" class="form-input" id="project-name" placeholder="my-awesome-project">
                </div>
                <div class="form-group">
                    <label class="form-label">Author Name:</label>
                    <input type="text" class="form-input" id="author-name" placeholder="Your Name">
                </div>
                <div class="form-group">
                    <label class="form-label">Author Email:</label>
                    <input type="email" class="form-input" id="author-email" placeholder="your.email@example.com">
                </div>
            `;
            
            const actions = `
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="createProject('${templateId}')">Create Project</button>
            `;
            
            showModal('Create New Project', content, actions);
        }

        async function createProject(templateId) {
            const projectName = document.getElementById('project-name').value.trim();
            const authorName = document.getElementById('author-name').value.trim();
            const authorEmail = document.getElementById('author-email').value.trim();
            
            if (!projectName) {
                showNotification('Please enter a project name', 'warning');
                return;
            }
            
            const customVars = {};
            if (authorName) customVars.author = authorName;
            if (authorEmail) customVars.email = authorEmail;
            
            try {
                const response = await fetch('/api/templates/create-project', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        template_id: templateId,
                        project_name: projectName,
                        custom_vars: customVars
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    closeModal();
                    refreshFileTree();
                    showNotification('Project created successfully', 'success');
                    
                    // Show next steps
                    if (data.next_steps && data.next_steps.length > 0) {
                        const steps = data.next_steps.join('\n');
                        addTerminalOutput(`Project created! Next steps:\n${steps}`);
                        switchBottomPanel('terminal');
                    }
                } else {
                    showNotification('Error creating project: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error creating project: ' + error.message, 'error');
            }
        }

        // Terminal Functions
        function executeTerminalCommand(command) {
            addTerminalOutput(`$ ${command}`);
            
            // Basic command simulation
            if (command.startsWith('cd ')) {
                addTerminalOutput(`Changed directory to ${command.substring(3)}`);
            } else if (command === 'ls' || command === 'dir') {
                addTerminalOutput('file1.py  file2.js  folder1/  folder2/');
            } else if (command === 'pwd') {
                addTerminalOutput('/workspace');
            } else if (command === 'clear') {
                document.getElementById('terminal-output').innerHTML = '';
                return;
            } else {
                addTerminalOutput(`Command not found: ${command}`);
            }
        }

        function addTerminalOutput(output) {
            const terminalOutput = document.getElementById('terminal-output');
            const line = document.createElement('div');
            line.className = 'terminal-line';
            line.textContent = output;
            terminalOutput.appendChild(line);
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }

        // Chat Functions
        async function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatMessage('user', message);
            input.value = '';
            
            // Add AI response (placeholder)
            setTimeout(() => {
                addChatMessage('ai', 'I understand you want help with: "' + message + '". This is a placeholder response. The actual AI integration would process your request here.');
            }, 1000);
        }

        function addChatMessage(sender, message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            
            if (sender === 'user') {
                messageDiv.innerHTML = `<strong>You:</strong> ${message}`;
            } else {
                messageDiv.innerHTML = `<strong>AI Assistant:</strong> ${message}`;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Utility Functions
        function refreshFileTree() {
            loadFileTree();
        }

        function handleFileUpload(event) {
            const files = Array.from(event.target.files);
            
            files.forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    createTab(file.name, file.name, e.target.result);
                    showEditor();
                };
                reader.readAsText(file);
            });
            
            showNotification(`${files.length} file(s) uploaded`, 'success');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function showContextMenu(event, fileItem) {
            const contextMenu = document.createElement('div');
            contextMenu.className = 'context-menu';
            contextMenu.style.left = event.pageX + 'px';
            contextMenu.style.top = event.pageY + 'px';
            
            const isFile = fileItem.dataset.type === 'file';
            const path = fileItem.dataset.path;
            
            contextMenu.innerHTML = `
                ${isFile ? '<div class="context-menu-item" onclick="openFile(\'' + path + '\', \'' + fileItem.textContent + '\')"><i class="fas fa-eye"></i> Open</div>' : ''}
                <div class="context-menu-item" onclick="renameItem('${path}')"><i class="fas fa-edit"></i> Rename</div>
                <div class="context-menu-item" onclick="deleteItem('${path}')"><i class="fas fa-trash"></i> Delete</div>
                <div class="context-menu-separator"></div>
                <div class="context-menu-item" onclick="copyPath('${path}')"><i class="fas fa-copy"></i> Copy Path</div>
            `;
            
            document.body.appendChild(contextMenu);
        }

        function closeContextMenu() {
            const contextMenu = document.querySelector('.context-menu');
            if (contextMenu) {
                contextMenu.remove();
            }
        }

        // Placeholder functions for context menu actions
        function renameItem(path) {
            showNotification('Rename functionality not implemented yet', 'info');
            closeContextMenu();
        }

        function deleteItem(path) {
            if (confirm('Are you sure you want to delete this item?')) {
                showNotification('Delete functionality not implemented yet', 'info');
            }
            closeContextMenu();
        }

        function copyPath(path) {
            navigator.clipboard.writeText(path);
            showNotification('Path copied to clipboard', 'success');
            closeContextMenu();
        }

        // Search Functions
        async function performSearch() {
            const pattern = document.getElementById('search-pattern').value.trim();
            const caseSensitive = document.getElementById('search-case-sensitive').checked;
            const fileContent = document.getElementById('search-file-content').checked;
            
            if (!pattern) {
                showNotification('Please enter a search pattern', 'warning');
                return;
            }
            
            try {
                const response = await fetch(`/api/files/search?pattern=${encodeURIComponent(pattern)}&case_sensitive=${caseSensitive}&file_content=${fileContent}`);
                const data = await response.json();
                
                if (data.success) {
                    renderSearchResults(data.results);
                } else {
                    showNotification('Error searching: ' + data.error, 'error');
                }
            } catch (error) {
                showNotification('Error searching: ' + error.message, 'error');
            }
        }

        function renderSearchResults(results) {
            const container = document.getElementById('search-results');
            container.innerHTML = '';
            
            if (results.length === 0) {
                container.innerHTML = '<div style="color: var(--text-muted); margin-top: 10px;">No results found</div>';
                return;
            }
            
            results.forEach(result => {
                const div = document.createElement('div');
                div.style.cssText = 'margin: 5px 0; padding: 8px; background: var(--dark-light); border-radius: 4px; cursor: pointer; font-size: 12px;';
                
                div.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 3px;">${result.name}</div>
                    <div style="color: var(--text-muted); margin-bottom: 3px;">${result.path}</div>
                    <div style="color: var(--text-muted);">Match: ${result.match_type}</div>
                `;
                
                div.addEventListener('click', function() {
                    openFile(result.path, result.name);
                });
                
                container.appendChild(div);
            });
        }

        // Git operation placeholders
        async function gitPull(repoPath) {
            showNotification('Git pull functionality not fully implemented yet', 'info');
        }

        async function gitPush(repoPath) {
            showNotification('Git push functionality not fully implemented yet', 'info');
        }

        function showCommitModal(repoPath) {
            showNotification('Git commit functionality not fully implemented yet', 'info');
        }

        // Additional AI functions placeholders
        function showRefactorModal() {
            showNotification('Refactor functionality not fully implemented yet', 'info');
        }

        function showExplainModal() {
            showNotification('Explain code functionality not fully implemented yet', 'info');
        }
    </script>
</body>
</html>